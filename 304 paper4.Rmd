---
title: "304 paper4"
output: html_document
---

```{r setup, include=FALSE}
#install.packages("pdftools")
#install.packages("janitor")
#install.packages("tidyverse")
#install.packages("tidyr")
#install.packages("scales")
library(janitor)
library(pdftools)
library(purrr)
library(tidyverse)
library(stringi)
all_content <- pdf_text("male.pdf")
just_page_i <- stri_split_lines(all_content[[38]])[[1]]
just_page_i <- just_page_i[just_page_i != ""] # delete empty line

just_page_i_no_header <- just_page_i[9:52]
just_page_i_no_header

demography_data <- tibble(all = just_page_i_no_header)
demography_data


demography_data <-
  demography_data |>
  mutate(all = str_squish(all)) |> # Any space more than two spaces is reduced
  mutate(all = str_replace(all, "Total urban", "Total_urban")) |> # One specific issue
  mutate(all = str_replace(all, "Dares Salaam city", "Dares_Salaam_city")) |> # And another
  mutate(all = str_replace(all, "Other urban", "Other_urban")) |> 
  mutate(all = str_replace(all, "D ares Salaam", "Dar_es_Salaam")) |>
  mutate(all = str_replace(all, "I 1.7", "11.7")) |>
  mutate(all = str_replace(all, "Total rural", "Total_rural")) |> # One specific issue
  separate(col = all,
           into = c("Background Characteristic", "No education", "Primary incomplete", "Completed primary", "Some secondary and higher", "Don't know", "Total", "Median year of schooling", "Total number"),
           sep = " ", # Works fine because the tables are nicely laid out
           remove = TRUE,
           fill = "right",
           extra = "drop"
  )

demography_data

write_csv(demography_data, "outputs/data/row_data.csv")
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
